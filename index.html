<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Ramoney</title>
</head>
<body>
    <nav id="navbar">
      <a href="" class="nav-brand"><b><center>Dollar To Naira Exchange App</a>
    </nav>

    <div class="container" id="main">
        <h1>Welcome to Ramoney</h1>

        <form id="conversion-form" novalidate>
            <label for="amount"></label>
            <input id="amount" type="text" placeholder="Enter your amount">
            <label for="amount">Amount(in Naira) CBN/Forex Rate</label>
            <input id="coverted-amount1" type="text" readonly placeholder="Display equilvalence"">
            <br/>
            <label for="amount">Amount(in Naira) Aboki/Black market Rate</label>
            <input id="coverted-amount" type="text" readonly placeholder="Display equilvalence" /> 
            <div>
               <input type="submit" value="Convert" id="convert-button" class="btn btn-default">
            </div>
            <p id="src"></p>
        </form>
    </div>

    <script>
         const convertButton = document.querySelector('#conversion-form');
        // convertButton.addEventListener('submit', (e) => {
        //     e.preventDefault();
        //     const inputtedAmount = document.querySelector('#amount').value;
        //     const convertedAmount = nairaToDollarConversion(inputtedAmount);
        //     document.querySelector('#coverted-amount').value = convertedAmount === ""? "-" : `$${convertedAmount}`;
        // })

         convertButton.addEventListener('submit', (e) => {
            e.preventDefault();
            const inputtedAmount = document.querySelector('#amount').value;
            if(isNaN(inputtedAmount) || inputtedAmount === '' || inputtedAmount < 0) {
                return "";
            }
            fetch('https://api.exchangerate-api.com/v4/latest/USD')
            .then(response => response.json())
            .then(data => {
                const dollarRate = data.rates.NGN;
                const convertedAmount = Number(inputtedAmount) * dollarRate;
                result=convertedAmount.toFixed(2)
                document.querySelector('#coverted-amount1').value = `#${result}`
            })
            .catch(error => {
                alert("error ")
                console.log(error);
            })
    


          // document.querySelector('#coverted-amount').value = convertedAmount === ""? "-" : `$${convertedAmount}`;
         })

   
            convertButton.addEventListener('submit', (e) => {
            e.preventDefault();
         const amountField = document.querySelector('#amount').value
         const convertedAmount = nairaToDollarConversion(amountField);
         const DOLLAR_RATE =731.53;
         document.querySelector('#coverted-amount').value = convertedAmount=== ""? "-" : `#${convertedAmount}`;
         
         })


        const nairaToDollarConversion = (amount) => {
            const DOLLAR_RATE =731.53;
            result=Number(amount)*DOLLAR_RATE;
            return result.toFixed(2)
            if(isNaN(amount) || amount === '' || amount < 0) {
                alert('Please enter a valid number');
                return "";
            }
    
        }






       

        
    </script>
</body>
</html>
