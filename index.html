
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Ramoney</title>
</head>
<body>
    <nav id="navbar">
      <a href="" class="nav-brand"><b><center>Dollar To Naira Exchange App</a>
    </nav>

    <div class="container" id="main">
        <h1>Welcome to Ramoney</h1>

        <form id="conversion-form" novalidate>
            <label for="amount">Enter the Amount(in Dollar) </label>
            <div id="input-wrapper">
            <input id="amount" type="number" placeholder="$">
            </div>
            <div>
                <input type="submit" value="Convert" id="convert-button" class="btn btn-default">
            </div>
            <br/>
            <label for="amount">Amount(in Naira) CBN/Forex Rate</label>
            <input id="coverted-amount1" type="text" readonly placeholder="Display equilvalence"">
            <br/>
            <label for="amount">Amount(in Naira) Black market Rate</label>
            <input id="coverted-amount" type="text" readonly placeholder="Display equilvalence" /> 
          
            <p id="src"></p>
            <p id="src1"></p>
        </form>
    </div>

    <script>
         const convertButton = document.querySelector('#conversion-form');
        // convertButton.addEventListener('submit', (e) => {
        //     e.preventDefault();
        //     const inputtedAmount = document.querySelector('#amount').value;
        //     const convertedAmount = nairaToDollarConversion(inputtedAmount);
        //     document.querySelector('#coverted-amount').value = convertedAmount === ""? "-" : `$${convertedAmount}`;
        // })

         convertButton.addEventListener('submit', (e) => {
            e.preventDefault();
            const inputtedAmount = document.querySelector('#amount').value;
            if(isNaN(inputtedAmount) || inputtedAmount === '' || inputtedAmount < 0) {
                return "";
            }
            fetch('https://api.exchangerate-api.com/v4/latest/USD')
            .then(response => response.json())
            .then(data => {
                const dollarRate = data.rates.NGN;
                const convertedAmount = Number(inputtedAmount) * dollarRate;
                const result = convertedAmount.toFixed(2)
                const foratedResult = result.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                document.querySelector('#coverted-amount1').value = `₦${foratedResult}`
                const DOLLAR_RATE =736.38;
                document.querySelector('#src1').textContent = `1 USD = ${dollarRate} NGN CBN/Forex Rate`
                document.querySelector('#src').textContent = `1 USD = ${DOLLAR_RATE} NGN Black Market Rate`
               
            })
            .catch(error => {
                alert("error ")
                console.log(error);
            })
    


          // document.querySelector('#coverted-amount').value = convertedAmount === ""? "-" : `$${convertedAmount}`;
         })

   
            convertButton.addEventListener('submit', (e) => {
            e.preventDefault();
         const amountField = document.querySelector('#amount').value
         const convertedAmount = nairaToDollarConversion(amountField);
         document.querySelector('#coverted-amount').value = convertedAmount=== ""? "-" : `₦${convertedAmount}`;
       
         })

         const nairaToDollarConversion = (amount) => {
            const DOLLAR_RATE =736.38;
            const result = Number(amount)*DOLLAR_RATE;
            const results=result.toFixed(2)
            return results.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            if(isNaN(amount) || amount === '' || amount < 0) {
                alert('Please enter a valid number');
                return "";
            }
    
        }

        var input = document.getElementById('input');
        var dropdown = document.getElementById('dropdown');
      
        input.addEventListener('click', function() {
          dropdown.style.display = 'block';
        });
      
        dropdown.addEventListener('click', function(e) {
          if (e.target.tagName === 'LI') {
            input.value = e.target.innerHTML;
            dropdown.style.display = 'none';
          }
        });
    </script>
</body>
</html>
